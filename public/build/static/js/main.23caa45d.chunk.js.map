{"version":3,"sources":["Panels/ConfigPage.js","Panels/CreateCert.js","Panels/ManageCerts.js","App.js","index.js"],"names":["ConfigPage","id","useState","window","APP","config","setConfig","useEffect","console","log","Object","entries","map","el","num","top","onChange","e","target","value","size","onClick","CreateCert","usemodal","selectedType","setSelectedType","en","ru","titles","setTitles","name","type","certTypes","allFields","hashValue","setHashValue","pasportValue","setPasportValue","certNumValue","setCertNumValue","firsname","lastname","patronymic","fioValue","setFioValue","expireValue","setExpireValue","brithValue","setBrithValue","status","setStatus","description","mode","RandExp","gen","style","disabled","length","title","crypto","createHash","update","digest","modname","preview","unrz","unrzFull","attrs","ntitle","nentitle","nenvalue","replace","order","entitle","envalue","toString","expiredAt","serviceUnavailable","data","pasport","fio","brith","expire","certNum","hash","stretched","placeholder","options","label","defaultChecked","ManageCerts","setStory","clickCount","setClickCount","currentTarget","dataset","story","height","icon","width","App","activeStory","setActiveStory","login","password","authData","setAuthData","isAuthValid","popout","setPopout","fetchedData","setFetchedData","DataModal","setDataMmodal","activeModal","setactiveModal","onStoryChange","isDesktop","innerWidth","auth","alignY","alignX","onSubmit","preventDefault","fetch","apiUrl","method","headers","body","JSON","stringify","then","r","json","catch","error","sendData","marginLeft","modal","viewWidth","onClose","msg","defaultValue","link","src","qr","marginTop","platform","scheme","header","separator","justifyContent","fixed","maxWidth","backgroundColor","borderRadius","before","animate","spaced","tabbar","selected","text","activePanel","nameActiveModal","attributes","getNamedItem","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.23caa45d.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n    View,\r\n    Panel,\r\n    Group,\r\n    PanelHeader,\r\n    Placeholder,\r\n    Title,\r\n    FormLayout,\r\n    FormItem,\r\n    Input,\r\n    Button,\r\n    Header,\r\n    Textarea,\r\n} from '@vkontakte/vkui';\r\n\r\nimport { Icon28ServicesOutline, Icon28NewsfeedOutline, Icon28BugOutline, } from \"@vkontakte/icons\"\r\n\r\nconst ConfigPage = ({ id }) => {\r\n\r\n    const [config, setConfig] = useState(window.APP.config);\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        console.log(config);\r\n\r\n    })\r\n\r\n    function saveConfig() {\r\n        window.APP.config = config;\r\n    }\r\n\r\n    return (\r\n        <Panel id={id}>\r\n            <PanelHeader>Настройки</PanelHeader>\r\n            \r\n                    <Group>\r\n                        <Header>Config</Header>\r\n                        <FormLayout>\r\n                            {Object.entries(config).map((el, num) =>\r\n                            (<FormItem top={el[0]} key={num}>\r\n                                <Input onChange={(e)=>{console.log(config);setConfig({...config, [el[0]]: e.target.value })}} value={el[1]} />\r\n                            </FormItem>)\r\n                            )}\r\n                        </FormLayout>\r\n\r\n                    </Group>\r\n            \r\n<Button size=\"l\" onClick={saveConfig}>Сохранить</Button>\r\n        </Panel>\r\n\r\n    )\r\n}\r\n\r\nexport default ConfigPage;","import React, { useState } from 'react';\r\nimport crypto from \"crypto\";\r\nimport {\r\n    Panel,\r\n    Group,\r\n    PanelHeader,\r\n    FormItem,\r\n    Input,\r\n    Separator,\r\n    Header,\r\n    Button,\r\n    Select,\r\n    Checkbox,\r\n} from '@vkontakte/vkui';\r\nimport RandExp from \"randexp\";\r\n\r\nconst CreateCert = ({ id, usemodal }) => {\r\n    const [selectedType, setSelectedType] = useState(\"VACCINE_CERT\");\r\n    const [titles, setTitles] = useState({ en: \"COVID-19 vaccination certificate\", ru: \"Сертификат вакцинации от COVID-19\" })\r\n    const [certTypes, setCertTypes] = useState([{ name: \"Вакцина\", type: \"VACCINE_CERT\" }, { name: \"Переболел\", type: \"ILLNESS_FACT\" }, { name: \"ПЦР тест\", type: \"COVID_TEST\" },]);\r\n    const [allFields, setallFields] = useState(true);\r\n    const [hashValue, setHashValue] = useState(\"\");\r\n    const [pasportValue, setPasportValue] = useState(\"\");\r\n    const [certNumValue, setCertNumValue] = useState(\"\");\r\n    const [fioValue, setFioValue] = useState({ firsname: \"\", lastname: \"\", patronymic: \"\" });\r\n    const [expireValue, setExpireValue] = useState(\"\");\r\n    const [brithValue, setBrithValue] = useState(\"\");\r\n    const [status, setStatus] = useState(1)\r\n\r\n    function handleSubit(e) {\r\n        usemodal(e, {\r\n            preview: {\r\n                type: selectedType,\r\n                unrz: certNumValue,\r\n                unrzFull: certNumValue,\r\n                attrs: [\r\n                    { type: \"fio\", ntitle: \"ФИО\", nentitle: \"Full name\", nenvalue: \"K****** S***** IU******\", value: fioValue.lastname.length > 0 && fioValue.firsname.replace(/(?!^)[\\s\\S]/g, '*') + \" \" + fioValue.lastname.replace(/(?!^)[\\s\\S]/g, '*') + \" \" + fioValue.patronymic.replace(/(?!^)[\\s\\S]/g, '*'), order: 1 },\r\n                    { type: \"birthDate\", title: \"Дата рождения\", entitle: \"Date of birth\", envalue: brithValue, value: brithValue, order: 2 },\r\n                    { type: \"passport\", title: \"Паспорт\", entitle: \"National passport\", envalue: pasportValue.length > 0 && pasportValue, value: pasportValue.length > 0 && pasportValue, order: 3 }],\r\n                title: titles.ru,\r\n                entitle: titles.en,\r\n                status: status.toString(),\r\n                expiredAt: expireValue,\r\n                serviceUnavailable: false\r\n            },\r\n            data: {\r\n                pasport: { pasportValue },\r\n                fio: { preview: fioValue.lastname.length > 0 && fioValue.firsname.replace(/(?!^)[\\s\\S]/g, '*') + \" \" + fioValue.lastname.replace(/(?!^)[\\s\\S]/g, '*') + \" \" + fioValue.patronymic.replace(/(?!^)[\\s\\S]/g, '*'), fioValue },\r\n                brith: brithValue,\r\n                expire: expireValue,\r\n                certNum: certNumValue,\r\n                status: status,\r\n                type: selectedType,\r\n                hash: hashValue\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    const typeCrtChanger = (e) => {\r\n        setSelectedType(e.target.value)\r\n        switch (e.target.value) {\r\n            case \"VACCINE_CERT\":\r\n                setTitles({ en: \"COVID-19 vaccination certificate\", ru: \"Сертификат вакцинации от COVID-19\" })\r\n                break;\r\n            case \"COVID_TEST\":\r\n                setTitles({ en: \"COVID-19 test\", ru: \"Анализ на COVID-19\" })\r\n                break;\r\n            case \"ILLNESS_FACT\":\r\n\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n\r\n        <Panel id={id}>\r\n            <PanelHeader >Создание сертификата</PanelHeader>\r\n\r\n            <Group description={\"Символ * ставится автоматически\"}>\r\n                <Header>ФИО</Header>\r\n                <FormItem top=\"Фамилия\">\r\n                    <Input type=\"text\" id=\"firsname\" value={fioValue.firsname} onChange={e => { setFioValue({ ...fioValue, firsname: e.target.value }) }} />\r\n                </FormItem>\r\n                <FormItem top=\"Имя\">\r\n                    <Input type=\"text\" id=\"lastname\" value={fioValue.lastname} onChange={e => { setFioValue({ ...fioValue, lastname: e.target.value }) }} />\r\n                </FormItem>\r\n                <FormItem top=\"Отчество\">\r\n                    <Input type=\"text\" id=\"patronymic\" value={fioValue.patronymic} onChange={e => { setFioValue({ ...fioValue, patronymic: e.target.value }) }} />\r\n                </FormItem>\r\n            </Group>\r\n            <Group id=\"certData2\">\r\n                <Header>Данные сертификата</Header>\r\n                <FormItem top=\"Дата рождения\">\r\n                    <Input type=\"date\" id=\"brith\" value={brithValue} onChange={e => { setBrithValue(e.target.value) }} />\r\n                </FormItem>\r\n                <FormItem top=\"Срок окончания\">\r\n                    <Input type=\"date\" id=\"expire\" value={expireValue} onChange={e => { setExpireValue(e.target.value) }} />\r\n                </FormItem>\r\n                <FormItem top=\"Паспорт\">\r\n                    <Input type=\"text\" id=\"pasport\" value={pasportValue} onChange={e => { setPasportValue(e.target.value) }} />\r\n                    <Button mode=\"secondary\" onClick={() => setPasportValue(new RandExp(/^([0-9]{4} [0-9]{6})?$/).gen())} style={{ \"marginTop\": \"10px\" }}>Сгенерировать</Button>\r\n                </FormItem>\r\n                <Separator />\r\n                <FormItem top=\"Номер сретификата (9540 0000 **** ****)\">\r\n                    <Input type=\"text\" id=\"numCert\" value={certNumValue} onChange={e => { setCertNumValue(e.target.value) }} />\r\n                    <Button mode=\"secondary\" onClick={() => setCertNumValue(new RandExp(/^(95400000 [0-9]{4} [0-9]{4})?$/).gen())} style={{ \"marginTop\": \"10px\" }}>Сгенерировать</Button>\r\n                </FormItem>\r\n                <FormItem top=\"Hash\">\r\n                    <Input type=\"text\" id=\"hash\" value={hashValue} onChange={(e) => { setHashValue(e.target.value) }} />\r\n                    <Button disabled={!(certNumValue.length > 0)} title=\"Генерируется на осонове номера сертивиката\"\r\n                        mode=\"secondary\" onClick={() => { setHashValue(crypto.createHash(\"md5\").update(certNumValue).digest(\"hex\")) }} style={{ \"marginTop\": \"10px\" }}>Сгенерировать</Button>\r\n                </FormItem>\r\n                <Button modname=\"preview\" disabled={!allFields} onClick={handleSubit} size=\"l\" mode=\"commerce\" stretched={true}>Создать</Button>\r\n            </Group>\r\n            <Group>\r\n                <Header>Дополнительно</Header>\r\n                <FormItem top=\"Тип сертификата\">\r\n                    <Select placeholder=\"Вакцина\" onChange={typeCrtChanger} options={certTypes.map(el => ({ label: el.name, value: el.type }))} />\r\n                </FormItem>\r\n\r\n                <FormItem top=\"Статус\">\r\n                    <Checkbox defaultChecked onChange={() => { setStatus(1) }} >Действителен</Checkbox>\r\n                    <Checkbox onChange={() => { setStatus(\"Отрицательный\") }} >Отрицательный</Checkbox>\r\n                    <Checkbox onChange={() => { setStatus(\"Положительный\") }} >Положительный</Checkbox>\r\n                    <Checkbox onChange={() => { setStatus(3) }} >Срок истёк</Checkbox>\r\n                </FormItem>\r\n            </Group>\r\n        </Panel>\r\n\r\n    )\r\n}\r\n\r\nexport default CreateCert;","import React, { useState, useEffect } from 'react';\r\nimport {\r\n    View,\r\n    Panel,\r\n    Group,\r\n    PanelHeader,\r\n    Placeholder,\r\n} from '@vkontakte/vkui';\r\n\r\nimport { Icon28ServicesOutline, Icon28NewsfeedOutline } from \"@vkontakte/icons\"\r\n\r\nconst ManageCerts = ({id, setStory}) => {\r\n    const [clickCount, setClickCount] = useState(0);\r\n\r\n    const openOtherPage = () =>{\r\n            if(clickCount == 3){\r\n                setClickCount(0);\r\n                setStory({currentTarget:{dataset:{story:\"other\"}}});\r\n            }\r\n            else {\r\n                setClickCount(clickCount + 1)\r\n            }\r\n    }\r\n\r\n    return (\r\n            <Panel id={id}>\r\n                <PanelHeader data-story=\"other\" onClick={openOtherPage}>Управление сертификатами</PanelHeader>\r\n                <Group style={{ height: '1000px' }}>\r\n                    <Placeholder icon={<Icon28NewsfeedOutline width={56} height={56} />} />\r\n                </Group>\r\n            </Panel>\r\n       \r\n    )\r\n}\r\n\r\nexport default ManageCerts;","import React, { useState, useEffect } from 'react';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport {\n  Epic,\n  Tabbar,\n  View,\n  TabbarItem,\n  SplitCol,\n  Panel,\n  Cell,\n  Group,\n  SplitLayout,\n  PanelHeader,\n  ConfigProvider,\n  AdaptivityProvider,\n  AppRoot,\n  ModalRoot,\n  ModalCard,\n  Button,\n  PopoutWrapper,\n  FormItem,\n  Input,\n  Header,\n  FormLayout,\n  Title,\n  Div,\n  SimpleCell\n} from '@vkontakte/vkui';\n\nimport { Icon24Settings, Icon24DocumentOutline, Icon20CopyOutline } from \"@vkontakte/icons\"\n\nimport ConfigPage from \"./Panels/ConfigPage\"\nimport CreateCert from \"./Panels/CreateCert\";\nimport ManageCerts from './Panels/ManageCerts';\n\nconst App = () => {\n  const [activeStory, setActiveStory] = useState('newCert');\n  const [authData, setAuthData] = useState({ login: \"\", password: \"\" });\n  const [isAuthValid, setIsAuthValid] = useState(false);\n  const [popout, setPopout] = useState(null);\n\n  const [fetchedData, setFetchedData] = useState();\n\n  const [DataModal, setDataMmodal] = useState({});\n  const [activeModal, setactiveModal] = useState(null);\n\n  const onStoryChange = (e) => setActiveStory(e.currentTarget.dataset.story);\n  const isDesktop = window.innerWidth >= 850;\n  const hasHeader = true;\n\n\n\n  const modalBack = () => {\n    setactiveModal(null);\n    setFetchedData()\n  };\n\n\n  const setActiveModall = (e, data) => {\n\n    let nameActiveModal = e.currentTarget.attributes.getNamedItem('modname').value\n\n    setactiveModal(nameActiveModal)\n    setDataMmodal(data)\n\n  }\n\n\n  const sendData = (e) => {\n    e.preventDefault();\n    fetch(window.APP.config.apiUrl,\n      {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ auth: { login: e.target[0].value, password: e.target[1].value }, data: DataModal })\n      })\n      .then(r => r.json())\n      .then(r => { setFetchedData(r) })\n      .catch(r=> {setFetchedData({error: \"notAwalible\"});})\n\n  }\n\n  const auth = () => {\n    setPopout(<PopoutWrapper alignY=\"center\" alignX=\"center\">\n      <Group>\n        <Header>Авторизация</Header>\n        <FormLayout onSubmit={(e) => { sendData(e); setPopout(null); }}>\n          <FormItem status={isAuthValid} top=\"Логин\">\n            <Input type=\"text\" onChange={e => { setAuthData({ ...authData, login: e.target.value }) }} />\n          </FormItem>\n          <FormItem status={isAuthValid} top=\"Пароль\">\n            <Input type=\"text\" onChange={e => { setAuthData({ ...authData, password: e.target.value }) }} />\n          </FormItem>\n        </FormLayout>\n        <Button style={{ marginLeft: \"10px\" }} onClick={() => { setPopout(null) }}>Закрыть</Button>\n      </Group>\n    </PopoutWrapper>)\n  }\n\n  const modal = (\n    <ModalRoot viewWidth=\"600\" activeModal={activeModal} onClose={modalBack}>\n      <ModalCard id=\"preview\">\n        {\n          !fetchedData ?\n            <iframe height=\"500\" src={`./iframe.html?json=${JSON.stringify(DataModal.preview)}`} /> :\n\n            <Group>\n              {fetchedData.msg == \"ok\" ?\n\n                <Div>\n                  <Header>Ссылка</Header>\n                <FormItem>\n                <Input defaultValue={fetchedData.data.link}/>\n                </FormItem>\n                  {/* <Header>Ссылка pdf</Header>\n                  <SimpleCell>{fetchedData.data.pdf} Не реалализованно</SimpleCell> */}\n\n                  <Header>QR Код</Header>\n                  <img width='300' height='300' src={fetchedData.data.qr} title=\"qr\" />\n                  \n                </Div> :\n\n                <Div>\n                  <Title>Возможно адрес \"{window.APP.config.apiUrl}\" недоступен</Title>\n                </Div>\n              }\n            </Group>\n        }\n        <Button onClick={auth} mode=\"commerce\" size=\"l\" style={{ marginTop: \"7px\" }} >Подтвердить</Button>\n      </ModalCard>\n    </ModalRoot>\n  )\n\n\n\n  return (\n\n    <ConfigProvider platform=\"ios\" scheme=\"space_gray\">\n      <AdaptivityProvider>\n        <AppRoot>\n          <SplitLayout\n            popout={popout}\n            modal={modal}\n            header={hasHeader && <PanelHeader separator={false} />}\n            style={{ justifyContent: \"center\" }}\n          >\n            {isDesktop && (\n              <SplitCol fixed width={280} maxWidth={280}>\n                <Panel>\n                  {hasHeader && <PanelHeader />}\n                  <Group>\n                    <Cell\n                      disabled={activeStory === 'newCert'}\n                      style={activeStory === 'newCert' ? {\n                        backgroundColor: \"var(--button_secondary_background)\",\n                        borderRadius: 8\n                      } : {}}\n                      data-story=\"newCert\"\n                      onClick={onStoryChange}\n                      before={<Icon24DocumentOutline />}\n                    >\n                      Создание сертификата\n                    </Cell>\n                    <Cell\n                      disabled={activeStory === 'mangeCerts'}\n                      style={activeStory === 'mangeCerts' ? {\n                        backgroundColor: \"var(--button_secondary_background)\",\n                        borderRadius: 8\n                      } : {}}\n                      data-story=\"mangeCerts\"\n                      onClick={onStoryChange}\n                      before={<Icon24Settings />}\n                    >\n                      Управление созданными\n                    </Cell>\n\n                  </Group>\n                </Panel>\n              </SplitCol>\n            )}\n\n            <SplitCol\n              animate={!isDesktop}\n              spaced={isDesktop}\n              width={isDesktop ? '560px' : '100%'}\n              maxWidth={isDesktop ? '560px' : '100%'}\n            >\n              <Epic activeStory={activeStory} tabbar={!isDesktop &&\n                <Tabbar>\n                  <TabbarItem\n                    onClick={onStoryChange}\n                    selected={activeStory === 'newCert'}\n                    data-story=\"newCert\"\n                    text=\"Создание\"\n                  ><Icon24DocumentOutline /></TabbarItem>\n                  <TabbarItem\n                    onClick={onStoryChange}\n                    selected={activeStory === 'mangeCerts'}\n                    data-story=\"mangeCerts\"\n                    text=\"Управление\"\n                  ><Icon24Settings /></TabbarItem>\n                </Tabbar>\n              }>\n                <View id=\"newCert\" activePanel=\"newCert\">\n                  <CreateCert auth={auth} usemodal={setActiveModall} id=\"newCert\" />\n                </View>\n\n                <View id=\"mangeCerts\" activePanel=\"mangeCerts\">\n                  <ManageCerts setStory={onStoryChange} id=\"mangeCerts\" />\n                </View>\n\n                <View data-story=\"oher\" activePanel=\"other\" id=\"other\">\n                  <ConfigPage id=\"other\" />\n                </View>\n\n              </Epic>\n            </SplitCol>\n          </SplitLayout>\n        </AppRoot>\n      </AdaptivityProvider>\n    </ConfigProvider>\n  );\n}\nexport default App;\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n\n"],"sourceRoot":""}